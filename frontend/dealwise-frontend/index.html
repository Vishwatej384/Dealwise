<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DealWise ‚Äî Smart Deals (Dark Mode)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <meta name="theme-color" content="#0d1117">

  <style>
    :root{
      --bg:#0d1117; --card:#0f1720; --muted:#98a0aa; --accent:#00c8ff; --accent-2:#ffc107;
      --glass: rgba(255,255,255,0.04);
      --glass-2: rgba(255,255,255,0.02);
      --glass-border: rgba(255,255,255,0.04);
      --radius:14px;
      --glass-padding:14px;
      --shadow: 0 8px 30px rgba(2,6,23,0.6);
      font-family: "Poppins",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    }
    html,body{ height:100%; margin:0; background:linear-gradient(180deg,#06080b 0%, #0d1117 100%); color:#e6eef6; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    a{ color:var(--accent); text-decoration:none }
    header.navbar{
      position:sticky; top:0; z-index:60; display:flex; align-items:center; justify-content:space-between;
      padding:12px 22px; gap:12px; backdrop-filter: blur(6px); background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
      border-bottom: 1px solid rgba(255,255,255,0.03);
    }
    .brand{ display:flex; gap:12px; align-items:center; }
    .bag-icon{ width:44px; height:44px; border-radius:8px; box-shadow: 0 6px 18px rgba(0,200,255,0.06); padding:6px; background: linear-gradient(180deg, rgba(0,200,255,0.06), rgba(0,200,255,0.02)); }
    .brand-name{ font-weight:700; font-size:18px; letter-spacing:0.2px }
    .brand-tag{ font-size:12px; color:var(--muted) }

    nav.nav-center{ display:flex; gap:12px; align-items:center; }
    .nav-link{ color:var(--muted); padding:8px 12px; border-radius:8px; transition: all .22s ease; font-weight:600; font-size:14px; }
    .nav-link:hover{ color:white; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); transform:translateY(-2px); }
    .nav-link.active{ color:var(--accent); box-shadow: 0 6px 18px rgba(0,200,255,0.06); }

    .nav-right{ display:flex; align-items:center; gap:10px; }
    .search-wrap input{ width:320px; max-width:36vw; padding:10px 12px; border-radius:10px; background:var(--glass); border:1px solid var(--glass-border); color:#e6eef6; outline:none; }
    .icon-btn{ background:transparent; border:1px solid rgba(255,255,255,0.03); padding:8px 10px; border-radius:10px; cursor:pointer; color:var(--muted); transition: all .18s ease; font-weight:600; }
    .icon-btn:hover{ transform:translateY(-3px); color:white; border-color:rgba(255,255,255,0.06); box-shadow:0 12px 40px rgba(0,0,0,0.6); }

    .cart-count{ display:inline-block; min-width:20px; padding:0 7px; border-radius:999px; background: linear-gradient(90deg,var(--accent),#66f0ff); color:#001; font-weight:700; margin-left:8px; font-size:13px; box-shadow:0 6px 20px rgba(0,200,255,0.06), inset 0 -2px 6px rgba(255,255,255,0.06); }

    main{ padding:28px 28px 120px; max-width:1200px; margin:0 auto; }

    /* HERO */
    .hero{ display:grid; grid-template-columns: 1fr 420px; gap:24px; align-items:center; margin-top:18px; }
    .hero-left{ padding:28px; background: linear-gradient(180deg, rgba(255,255,255,0.014), rgba(255,255,255,0.01)); border-radius:18px; box-shadow:var(--shadow); border:1px solid rgba(255,255,255,0.02); transform-origin:center; }
    .hero-title{ font-size:40px; line-height:1.02; margin:0 0 12px; color:#ffffff; letter-spacing:-0.6px; }
    .hero-title span{ color:var(--accent); text-shadow: 0 6px 36px rgba(0,200,255,0.08); }
    .hero-sub{ color:var(--muted); margin:12px 0 18px; max-width:56ch; }
    .hero-ctas{ display:flex; gap:12px; }
    .btn-accent{ background: linear-gradient(90deg,var(--accent), #66f0ff); color:#001; padding:10px 14px; border-radius:10px; border:none; cursor:pointer; font-weight:700; box-shadow: 0 10px 30px rgba(0,200,255,0.08); transform:translateZ(0); }
    .btn-ghost{ background:transparent; border:1px solid rgba(255,255,255,0.04); padding:10px 12px; color:var(--muted); border-radius:10px; cursor:pointer; font-weight:700; }
    .hero-right{ display:flex; flex-direction:column; gap:14px; align-items:flex-end; }
    .hero-card{ width:100%; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; overflow:hidden; border:1px solid rgba(255,255,255,0.02); box-shadow: 0 20px 50px rgba(2,6,23,0.6); transform:translateZ(0); }
    .hero-card img{ display:block; width:100%; height:260px; object-fit:cover; }

    /* SECTIONS */
    section.container{ margin-top:28px; background:transparent; }
    .section-title{ font-size:22px; margin:6px 0 12px; color:#fff; display:flex; align-items:center; gap:8px; }
    .deals-grid{ display:grid; grid-template-columns: repeat(3,1fr); gap:16px; }
    .deal-card{ background:var(--card); border-radius:12px; padding:12px; border:1px solid rgba(255,255,255,0.03); transition: transform .18s cubic-bezier(.2,.9,.2,1), box-shadow .18s; overflow:hidden; }
    .deal-card img{ width:100%; height:150px; object-fit:cover; border-radius:8px; display:block; }
    .deal-card h3{ margin:10px 0 6px; font-size:16px; }
    .deal-card .muted{ color:var(--muted); font-size:13px; margin:0; }
    .deal-actions{ display:flex; align-items:center; justify-content:space-between; margin-top:12px; gap:10px; }
    .deal-actions .price{ font-weight:700; color:#fff; }
    .deal-card:hover{ transform: translateY(-8px) scale(1.01); box-shadow:0 20px 50px rgba(0,0,0,0.6); }

    .cat-grid{ display:grid; grid-template-columns: repeat(6,1fr); gap:12px; margin-top:12px; }
    .cat-card{ background:var(--card); border-radius:10px; padding:8px; text-align:center; cursor:pointer; transition: transform .14s ease; border:1px solid rgba(255,255,255,0.02); }
    .cat-card img{ width:100%; height:100px; border-radius:8px; object-fit:cover; display:block; }
    .cat-card:hover{ transform:translateY(-6px); box-shadow: 0 16px 40px rgba(0,0,0,0.6); }

    /* ABOUT / FOOTER */
    .about-grid{ display:flex; gap:18px; align-items:center; margin-top:12px; }
    .about-image img{ width:420px; border-radius:12px; }

    footer.site-footer{ margin-top:42px; padding:24px; border-top:1px solid rgba(255,255,255,0.03); display:flex; justify-content:space-between; align-items:center; gap:12px; color:var(--muted); }

    /* Toast */
    #toast{ position:fixed; right:22px; bottom:24px; background:linear-gradient(90deg, rgba(0,0,0,0.6), rgba(12,16,20,0.6)); color:#e6f7ff; padding:12px 16px; border-radius:10px; box-shadow:0 18px 50px rgba(0,0,0,0.6); transform:translateY(12px) scale(.98); opacity:0; transition: all .28s cubic-bezier(.2,.9,.2,1); font-weight:600; z-index:9999;}
    #toast.show{ opacity:1; transform:translateY(0) scale(1); }

    /* small responsive */
    @media (max-width:1000px){
      .hero{ grid-template-columns: 1fr; }
      .deals-grid{ grid-template-columns: repeat(2,1fr); }
      .cat-grid{ grid-template-columns: repeat(3,1fr); }
      .search-wrap input{ width:220px; }
    }
    @media (max-width:600px){
      .deals-grid{ grid-template-columns: 1fr; }
      .cat-grid{ grid-template-columns: repeat(2,1fr); }
      header.navbar{ flex-direction:column; align-items:flex-start; gap:8px; padding:12px; }
      .search-wrap input{ width:100%; max-width:100%; }
    }

    /* Enhanced animations and modern effects */
    .pop-in { animation: popIn .55s cubic-bezier(.2,.85,.32,1) both; }
    @keyframes popIn { from { opacity:0; transform: translateY(12px) scale(.98) } to { opacity:1; transform: translateY(0) scale(1) } }

    .glow-pulse { box-shadow:0 0 0 rgba(0,0,0,0); animation: pulse 2.6s infinite; }
    @keyframes pulse { 0%{ box-shadow:0 0 0 rgba(0,200,255,0.08)} 50%{ box-shadow:0 12px 40px rgba(0,200,255,0.08)} 100%{ box-shadow:0 0 0 rgba(0,200,255,0.02)} }

    /* Modern hover effects */
    .deal-card {
      position: relative;
      overflow: hidden;
    }
    
    .deal-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.5s;
    }
    
    .deal-card:hover::before {
      left: 100%;
    }

    /* Enhanced button animations */
    .btn-accent {
      position: relative;
      overflow: hidden;
    }
    
    .btn-accent::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.3s;
    }
    
    .btn-accent:hover::before {
      left: 100%;
    }

    /* Floating elements */
    .floating {
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    /* Gradient text effect */
    .gradient-text {
      background: linear-gradient(45deg, var(--accent), #66f0ff, var(--accent-2));
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 3s ease infinite;
    }
    
    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Enhanced card shadows */
    .deal-card, .cat-card, .hero-card {
      backdrop-filter: blur(10px);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Modern scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.05);
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #66f0ff;
    }

  </style>
</head>
<body>

  <header class="navbar pop-in">
    <div class="brand">
      <svg class="bag-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <rect width="24" height="24" rx="6" fill="url(#g)"/>
        <defs>
          <linearGradient id="g" x1="0" x2="1">
            <stop offset="0" stop-color="#00c8ff" stop-opacity="0.16"/>
            <stop offset="1" stop-color="#66f0ff" stop-opacity="0.12"/>
          </linearGradient>
        </defs>
      </svg>
      <div>
        <div class="brand-name">DealWise</div>
        <div class="brand-tag">Smart Deals ‚Ä¢ Verified</div>
      </div>
    </div>

    <nav class="nav-center">
      <a class="nav-link active" href="index.html">Home</a>
      <a class="nav-link" href="categories.html">Categories</a>
      <a class="nav-link" href="deals.html">Top Deals</a>
      <a class="nav-link" href="about.html">About</a>
      <a class="nav-link" href="contact.html">Contact</a>
    </nav>

    <div class="nav-right">
      <div class="search-wrap">
        <input id="searchInput" placeholder="Search deals, gadgets, categories..." />
      </div>

      <button id="cartButton" class="icon-btn">
        üõçÔ∏è <span id="cartCount" class="cart-count">0</span>
      </button>

      <button id="loginBtn" class="icon-btn">Login</button>
      <button id="signupBtn" class="btn-accent">Sign Up</button>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="hero-left slide-up stagger-1">
        <h1 class="hero-title">Discover the best deals ‚Äî <span class="gradient-text">save smarter</span></h1>
        <p class="hero-sub">DealWise collects verified offers, honest reviews and price-tracking tools ‚Äî all in one neon-powered, dark-mode interface built for fast shopping.</p>
        <div class="hero-ctas">
          <button class="btn-accent micro-bounce" onclick="navigateTo('deals.html')">Browse Deals</button>
          <button class="btn-ghost micro-bounce" onclick="navigateTo('categories.html')">Shop by Category</button>
        </div>
        <div style="margin-top:18px; display:flex; gap:12px; align-items:center;">
          <div style="display:flex; gap:8px; align-items:center;">
            <div style="width:10px; height:10px; border-radius:12px; background:var(--accent); box-shadow:0 8px 30px rgba(0,200,255,0.06)"></div>
            <div style="color:var(--muted); font-weight:700;">Verified sellers</div>
          </div>
          <div style="display:flex; gap:8px; align-items:center;">
            <div style="width:10px; height:10px; border-radius:12px; background:var(--accent-2); box-shadow:0 8px 30px rgba(255,193,7,0.06)"></div>
            <div style="color:var(--muted); font-weight:700;">Price alerts</div>
          </div>
        </div>
      </div>

      <aside class="hero-right slide-up stagger-2 glow-pulse floating">
        <div class="hero-card">
          <img src="images/headphones.jpg" alt="Headphones" onerror="this.src='assets/placeholder.svg'">
          <div style="padding:12px; display:flex; justify-content:space-between; align-items:center;">
            <div>
              <div style="font-weight:700">Wireless Headphones</div>
              <div style="color:var(--muted); font-size:13px;">Now ‚Çπ2,499 ‚Ä¢ 30% off</div>
            </div>
            <div>
              <button class="btn-accent" onclick="addToCartByData('d1')">Add</button>
            </div>
          </div>
        </div>
        <div style="margin-top:12px; color:var(--muted); font-size:13px; text-align:right;">‚ú® Trusted deals ‚Ä¢ real users</div>
      </aside>
    </section>

    <!-- WHY CHOOSE -->
    <section class="container why">
      <h2 class="section-title gradient-text slide-up stagger-1">Why Choose DealWise</h2>
      <div style="display:flex; gap:12px;">
        <div class="why-card slide-up stagger-2" style="flex:1; background:var(--card); padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.02);">
          <div style="font-size:22px">üîé</div>
          <div style="font-weight:700; margin-top:8px">Smart Discovery</div>
          <div style="color:var(--muted)">Find curated, high-value offers across platforms.</div>
        </div>
        <div class="why-card slide-up stagger-3" style="flex:1; background:var(--card); padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.02);">
          <div style="font-size:22px">üõ°Ô∏è</div>
          <div style="font-weight:700; margin-top:8px">Verified Trust</div>
          <div style="color:var(--muted)">We verify listings and surface real reviews.</div>
        </div>
        <div class="why-card slide-up stagger-4" style="flex:1; background:var(--card); padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.02);">
          <div style="font-size:22px">üîî</div>
          <div style="font-weight:700; margin-top:8px">Price Alerts</div>
          <div style="color:var(--muted)">Track prices and get notified when they drop.</div>
        </div>
      </div>
    </section>

    <!-- CATEGORIES -->
    <section id="categories" class="container">
      <h2 class="section-title gradient-text slide-up stagger-1">Shop by Category</h2>
      <div class="cat-grid">
        <div class="cat-card slide-up stagger-1" onclick="navigateTo('categories.html')">
          <img src="images/keyboard.jpg" alt="Electronics" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Electronics</div>
        </div>
        <div class="cat-card slide-up stagger-2" onclick="navigateTo('categories.html')">
          <img src="images/smartwatch.jpg" alt="Fashion" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Fashion</div>
        </div>
        <div class="cat-card slide-up stagger-3" onclick="navigateTo('categories.html')">
          <img src="images/headphones.jpg" alt="Home" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Home & Kitchen</div>
        </div>
        <div class="cat-card slide-up stagger-4" onclick="navigateTo('categories.html')">
          <img src="images/keyboard.jpg" alt="Fitness" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Fitness</div>
        </div>
        <div class="cat-card slide-up stagger-5" onclick="navigateTo('categories.html')">
          <img src="images/smartwatch.jpg" alt="Gaming" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Gaming</div>
        </div>
        <div class="cat-card slide-up stagger-6" onclick="navigateTo('categories.html')">
          <img src="images/headphones.jpg" alt="Beauty" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Beauty</div>
        </div>
      </div>
    </section>

    <!-- TOP DEALS -->
    <section id="top-deals" class="container">
      <h2 class="section-title gradient-text slide-up stagger-1">üî• Top Deals</h2>
      <div id="dealsGrid" class="deals-grid" aria-live="polite"></div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="container about">
      <h2 class="section-title">About DealWise</h2>
      <div class="about-grid" style="gap:18px; align-items:center;">
        <div style="flex:1">
          <p style="color:var(--muted); max-width:56ch">DealWise curates verified offers and user feedback so you can shop confidently ‚Äî saving time and money. We combine smart discovery, price tracking and community trust.</p>
          <ul style="color:var(--muted)">
            <li>Multi-source deal consolidation</li>
            <li>Honest reviews & ratings</li>
            <li>Price history & alerts</li>
          </ul>
        </div>
        <div class="about-image">
          <img src="images/shopping.svg" alt="About" style="width:320px; border-radius:10px;" onerror="this.src='assets/placeholder.svg'">
        </div>
      </div>
    </section>

    <!-- CONTACT PREVIEW -->
    <section id="contact" class="container contact">
      <h2 class="section-title">Get in touch</h2>
      <p style="color:var(--muted)">Questions, feedback or collaboration ideas? Head to Contact page to send a message.</p>
      <div style="margin-top:12px;">
        <button class="btn-ghost" onclick="navigateTo('contact.html')">Open Contact Page</button>
      </div>
    </section>

  </main>

  <footer class="site-footer">
    <div>
      <div style="display:flex; gap:10px; align-items:center">
        <div style="display:flex; gap:10px; align-items:center">
          <svg width="30" height="30" viewBox="0 0 24 24"><rect width="24" height="24" rx="6" fill="#00c8ff" opacity="0.12"/></svg>
          <div style="font-weight:700">DealWise</div>
        </div>
        <div style="color:var(--muted); margin-left:12px">¬© 2025 DealWise</div>
      </div>
    </div>

    <div style="display:flex; gap:12px; align-items:center">
      <nav style="display:flex; gap:10px">
        <a href="deals.html">Top Deals</a>
        <a href="categories.html">Categories</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </footer>

  <div id="toast" role="status" aria-live="polite"></div>

  <script>
    /**********************************************
     * DealWise index.js (inline) - Dark + lively
     **********************************************/

    // ---------- CONFIG ----------
    // If your backend runs elsewhere, change API_BASE
    const API_BASE = 'http://localhost:8080/api';

    // ---------- SAMPLE DATA (can be replaced by backend) ----------
    const SAMPLE_DEALS = [
      { id: 'd1', title: 'Wireless Headphones', price: '‚Çπ2,499', note: '30% off', img: 'images/headphones.jpg' },
      { id: 'd2', title: 'Smartwatch Series 6', price: '‚Çπ8,999', note: '25% off', img: 'images/smartwatch.jpg' },
      { id: 'd3', title: 'RGB Gaming Keyboard', price: '‚Çπ1,799', note: '40% off', img: 'images/keyboard.jpg' },
      { id: 'd4', title: 'Bluetooth Speaker', price: '‚Çπ1,299', note: '35% off', img: 'images/headphones.jpg' },
      { id: 'd5', title: 'Wireless Mouse', price: '‚Çπ899', note: '20% off', img: 'images/keyboard.jpg' },
      { id: 'd6', title: '4K Smart TV', price: '‚Çπ49,999', note: '15% off', img: 'images/smartwatch.jpg' }
    ];

    // ---------- CART (localStorage) ----------
    const CART_KEY = 'dealwise_cart';
    function readCart(){ try { return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); } catch(e){ return []; } }
    function writeCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)); updateCartUI(); }
    function updateCartUI(){
      const count = readCart().reduce((s,i)=> s + (i.qty||1), 0);
      const el = document.getElementById('cartCount');
      if(el) el.textContent = count;
      // tiny glow when updated
      const btn = document.getElementById('cartButton');
      if(btn){ btn.classList.add('glow-pulse'); setTimeout(()=> btn.classList.remove('glow-pulse'), 900); }
    }

    function showToast(msg, time=2000){
      const t = document.getElementById('toast');
      if(!t) return;
      t.innerHTML = `<div style="display: flex; align-items: center; gap: 8px;"><span style="font-size: 18px;">‚úÖ</span>${msg}</div>`;
      t.classList.add('show');
      clearTimeout(window._toastTO);
      window._toastTO = setTimeout(()=> t.classList.remove('show'), time);
    }

    // Called by hero card add button
    function addToCartByData(id){
      const deal = SAMPLE_DEALS.find(d=>d.id===id);
      if(!deal) return showToast('Item not available');
      const cart = readCart();
      const idx = cart.findIndex(it => it.id === id);
      if(idx >= 0) cart[idx].qty = (cart[idx].qty||1) + 1;
      else cart.push({ id: deal.id, title: deal.title, price: deal.price, qty: 1, img: deal.img });
      writeCart(cart);
      showToast('‚úÖ Added to cart');
    }

    // will be used for dynamic "Add" buttons
    function addToCartFromButton(btn){
      const id = btn.getAttribute('data-id');
      const deal = SAMPLE_DEALS.find(d=>d.id===id);
      if(!deal) return showToast('Item not available');
      const cart = readCart();
      const idx = cart.findIndex(it => it.id === id);
      if(idx >= 0) cart[idx].qty = (cart[idx].qty||1) + 1;
      else cart.push({ id: deal.id, title: deal.title, price: deal.price, qty: 1, img: deal.img });
      writeCart(cart);

      // Enhanced animated +1 near the button
      const plus = document.createElement('span');
      plus.innerHTML = '<span style="color: #00ffea; font-weight: 800; font-size: 16px;">+1</span>';
      plus.style.position='absolute';
      plus.style.top='-10px';
      plus.style.right='-10px';
      plus.style.transform='translateY(0) scale(1)';
      plus.style.opacity='1';
      plus.style.pointerEvents='none';
      plus.style.zIndex='1000';
      btn.style.position='relative';
      btn.appendChild(plus);
      
      // Enhanced animation with scale and rotation
      plus.animate([
        { transform:'translateY(0px) scale(1) rotate(0deg)', opacity:1 },
        { transform:'translateY(-30px) scale(1.2) rotate(5deg)', opacity:0.8 },
        { transform:'translateY(-40px) scale(0.8) rotate(-5deg)', opacity:0 }
      ], { 
        duration: 1000, 
        easing: 'cubic-bezier(.2,.9,.2,1)' 
      });
      setTimeout(()=> plus.remove(), 1100);

      showToast('‚úÖ Added to cart');
    }

    // ---------- Render deals to grid ----------
    function renderDealsList(deals){
      const grid = document.getElementById('dealsGrid');
      if(!grid) return;
      grid.innerHTML = '';
      deals.forEach((d, index) => {
        const card = document.createElement('div');
        card.className = `deal-card slide-up stagger-${Math.min(index + 1, 6)}`;
        card.innerHTML = `
          <img src="${d.img}" alt="${d.title}" onerror="this.src='assets/placeholder.svg'">
          <h3>${d.title}</h3>
          <p class="muted">${d.note}</p>
          <div class="deal-actions">
            <div class="price">${d.price}</div>
            <div style="display:flex;gap:8px;">
              <button class="btn-ghost" data-id="${d.id}" aria-label="view-${d.id}" onclick="navigateTo('deals.html')">View</button>
              <button class="btn-accent" data-id="${d.id}" aria-label="add-${d.id}">Add</button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });

      // attach handlers for add buttons
      grid.querySelectorAll('.btn-accent[data-id]').forEach(b=>{
        b.addEventListener('click', (ev)=> {
          addToCartFromButton(b);
        });
      });
    }

    // ---------- Navigation helpers (page transitions) ----------
    function navigateTo(href){
      // small fade out animation then navigate
      document.documentElement.style.transition = 'opacity .28s ease, transform .28s ease';
      document.documentElement.style.opacity = '0.0';
      setTimeout(()=> location.href = href, 260);
    }

    // ---------- Try fetching deals from backend, else fallback ----------
    async function loadDeals(){
      const grid = document.getElementById('dealsGrid');
      if(!grid) return;
      
      // Modern loading animation
      grid.innerHTML = `
        <div style="grid-column: 1 / -1; display: flex; justify-content: center; align-items: center; padding: 40px;">
          <div style="display: flex; flex-direction: column; align-items: center; gap: 16px;">
            <div style="width: 40px; height: 40px; border: 3px solid rgba(0,200,255,0.2); border-top: 3px solid var(--accent); border-radius: 50%; animation: spin 1s linear infinite;"></div>
            <div style="color: var(--muted); font-weight: 600;">Loading amazing deals...</div>
          </div>
        </div>
      `;
      
      // Add spin animation
      const style = document.createElement('style');
      style.textContent = '@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }';
      document.head.appendChild(style);
      
      try {
        const res = await fetch(API_BASE + '/deals');
        if(res.ok){
          const data = await res.json();
          if(Array.isArray(data) && data.length){
            // Transform backend data to frontend format
            const transformedDeals = data.map(deal => ({
              id: `d${deal.id}`,
              title: deal.title,
              price: deal.price,
              note: deal.discount || 'Great deal',
              img: deal.imageUrl || 'images/headphones.jpg'
            }));
            renderDealsList(transformedDeals);
            return;
          }
        }
      } catch(e){
        console.log('Backend not available, using sample data:', e);
      }
      // fallback:
      setTimeout(() => {
        renderDealsList(SAMPLE_DEALS);
      }, 800); // Small delay for better UX
    }

    // ---------- Modals / login signup ‚Üí redirect to full pages ----------
    document.getElementById('loginBtn')?.addEventListener('click', ()=> navigateTo('login.html'));
    document.getElementById('signupBtn')?.addEventListener('click', ()=> navigateTo('signup.html'));
    document.getElementById('cartButton')?.addEventListener('click', ()=> navigateTo('cart.html'));

    // ---------- Page Init ----------
    document.addEventListener('DOMContentLoaded', ()=>{
      setTimeout(()=> { document.documentElement.style.opacity='1'; }, 80);
      updateCartUI();
      loadDeals();

      // small health check console
      fetch(API_BASE + '/hello').then(r=>r.text()).then(t=> console.log('backend:', t)).catch(()=>{ /* backend may be down ‚Äî it's fine */});
    });

    // expose addToCartByData globally (used in inline onclick)
    window.addToCartByData = addToCartByData;
    window.addToCartFromButton = addToCartFromButton;
    window.navigateTo = navigateTo;

      // --- Update cart count dynamically ---
document.addEventListener('DOMContentLoaded', () => {
  updateCartCount(); // already in your code, but ensures refresh works

  // redirect to cart page when clicking cart icon
  const cartBtn = document.querySelector('.cart-icon') || document.getElementById('cartButton');
  if(cartBtn){
    cartBtn.addEventListener('click', () => {
      window.location.href = 'cart.html';
    });
  }
});

  </script>

  <script>
const token = localStorage.getItem('token');
if (token) {
  document.getElementById('authStatus').textContent = 'You are logged in ‚úÖ';
} else {
  document.getElementById('authStatus').textContent = 'Not logged in';
}
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const userData = JSON.parse(localStorage.getItem("dealwise_user"));
  const navRight = document.querySelector(".nav-right"); // adjust if class name differs

  if (userData && userData.token) {
    // ‚úÖ Replace login/signup buttons with username + logout
    navRight.innerHTML = `
      <span style="color:#00c8ff;font-weight:600;margin-right:10px;">
        Hi, ${userData.name || "User"}
      </span>
      <button id="logoutBtn" style="background:#ff4757;color:white;border:none;padding:6px 10px;border-radius:6px;cursor:pointer;">
        Logout
      </button>
    `;

    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("dealwise_user");
      localStorage.removeItem("token");
      location.reload(); // refresh to reset navbar
    });
  }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const userData = JSON.parse(localStorage.getItem("dealwise_user"));
  
  // try multiple selectors in case of different class names
  const navRight = document.querySelector(".nav-right") ||
                   document.querySelector(".navbar-buttons") ||
                   document.querySelector(".auth-buttons");

  if (!navRight) return; // no navbar section found

  if (userData && userData.token) {
    navRight.innerHTML = `
      <span style="color:#00c8ff;font-weight:600;margin-right:10px;">
        Hi, ${userData.name || "User"}
      </span>
      <button id="logoutBtn" style="background:#ff4757;color:white;border:none;padding:6px 10px;border-radius:6px;cursor:pointer;">
        Logout
      </button>
    `;

    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("dealwise_user");
      localStorage.removeItem("token");
      location.reload();
    });
  }
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const userData = JSON.parse(localStorage.getItem("dealwise_user"));
  
  // Select your right-side navbar buttons container
  const navRight = document.querySelector(".nav-right") ||
                   document.querySelector(".navbar-buttons") ||
                   document.querySelector(".auth-buttons");

  if (!navRight) return;

  if (userData && userData.name) {
    // Get initials from name
    const initials = userData.name.split(" ").map(n => n[0]).join("").toUpperCase();

    // Replace login/signup with profile badge
    navRight.innerHTML = `
      <div style="display:flex;align-items:center;gap:10px;">
        <div id="profileCircle" 
          style="
            width:38px;height:38px;
            border-radius:50%;
            background:linear-gradient(135deg,#00c8ff,#007bff);
            display:flex;
            align-items:center;
            justify-content:center;
            color:#fff;
            font-weight:600;
            font-size:15px;
            cursor:pointer;
            box-shadow:0 0 10px rgba(0,200,255,0.5);
          ">
          ${initials}
        </div>
        <button id="logoutBtn"
          style="
            background:#ff4757;
            border:none;
            color:white;
            padding:6px 12px;
            border-radius:6px;
            font-weight:500;
            cursor:pointer;
          ">
          Logout
        </button>
      </div>
    `;

    // Logout event
    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("dealwise_user");
      localStorage.removeItem("token");
      location.reload();
    });
  }
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const userData = JSON.parse(localStorage.getItem("dealwise_user"));
  const loginBtn = document.getElementById("loginBtn");
  const signupBtn = document.getElementById("signupBtn");
  const navRight = document.querySelector(".nav-right");

  if (userData && userData.token) {
    // Remove only login/signup buttons
    if (loginBtn) loginBtn.remove();
    if (signupBtn) signupBtn.remove();

    // Create user initials (like HP for Harsh Patel)
    const initials = (userData.name || "User")
      .split(" ")
      .map(n => n[0])
      .join("")
      .toUpperCase();

    const userCircle = document.createElement("div");
    userCircle.textContent = initials;
    userCircle.style.background = "linear-gradient(90deg,#00c8ff,#66f0ff)";
    userCircle.style.color = "#001";
    userCircle.style.fontWeight = "700";
    userCircle.style.fontSize = "14px";
    userCircle.style.borderRadius = "50%";
    userCircle.style.width = "36px";
    userCircle.style.height = "36px";
    userCircle.style.display = "flex";
    userCircle.style.alignItems = "center";
    userCircle.style.justifyContent = "center";
    userCircle.style.marginRight = "8px";
    userCircle.style.boxShadow = "0 0 10px rgba(0,200,255,0.3)";

    // Logout button
    const logoutBtn = document.createElement("button");
    logoutBtn.textContent = "Logout";
    logoutBtn.style.background = "#ff4757";
    logoutBtn.style.color = "white";
    logoutBtn.style.border = "none";
    logoutBtn.style.padding = "6px 10px";
    logoutBtn.style.borderRadius = "6px";
    logoutBtn.style.cursor = "pointer";
    logoutBtn.style.fontWeight = "600";

    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("dealwise_user");
      localStorage.removeItem("token");
      location.reload();
    });

    // Container for initials + logout
    const userBox = document.createElement("div");
    userBox.style.display = "flex";
    userBox.style.alignItems = "center";
    userBox.style.gap = "10px";
    userBox.appendChild(userCircle);
    userBox.appendChild(logoutBtn);

    // Append to nav-right (keeps cart/search intact)
    navRight.appendChild(userBox);
  }
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const userData = JSON.parse(localStorage.getItem("dealwise_user"));
  const navRight = document.querySelector(".nav-right");

  if (!navRight) return;

  if (userData && userData.name) {
    const initials = userData.name
      .split(" ")
      .map(n => n[0])
      .join("")
      .toUpperCase();

    navRight.innerHTML = `
      <div style="display:flex;align-items:center;gap:14px;">
        <a href="cart.html" style="color:var(--accent);font-weight:600;text-decoration:none;">
          <i class="fas fa-shopping-cart"></i> Cart
        </a>
        <a href="profile.html" style="color:#e6eef6;text-decoration:none;font-weight:600;">
          My Profile
        </a>
        <div style="
          width:38px;height:38px;border-radius:50%;
          background:linear-gradient(135deg,var(--accent),#66f0ff);
          color:#001;display:flex;align-items:center;justify-content:center;
          font-weight:700;box-shadow:0 6px 18px rgba(0,200,255,0.1);
        ">
          ${initials}
        </div>
        <button id="logoutBtn" style="
          background:none;border:none;color:var(--muted);
          font-weight:600;cursor:pointer;
        ">Logout</button>
      </div>
    `;

    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("dealwise_user");
      localStorage.removeItem("token");
      location.reload();
    });
  }
});
</script>

</body>
</html>
