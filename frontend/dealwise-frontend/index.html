<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DealWise ‚Äî Smart Deals (Dark Mode)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <meta name="theme-color" content="#0d1117">

  <style>
    :root{
      --bg:#0d1117; --card:#0f1720; --muted:#98a0aa; --accent:#00c8ff; --accent-2:#ffc107;
      --glass: rgba(255,255,255,0.04);
      --glass-2: rgba(255,255,255,0.02);
      --glass-border: rgba(255,255,255,0.04);
      --radius:14px;
      --glass-padding:14px;
      --shadow: 0 8px 30px rgba(2,6,23,0.6);
      font-family: "Poppins",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    }
    html,body{ height:100%; margin:0; background:linear-gradient(180deg,#06080b 0%, #0d1117 100%); color:#e6eef6; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    a{ color:var(--accent); text-decoration:none }
    header.navbar{
      position:sticky; top:0; z-index:60; display:flex; align-items:center; justify-content:space-between;
      padding:12px 22px; gap:12px; backdrop-filter: blur(6px); background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
      border-bottom: 1px solid rgba(255,255,255,0.03);
    }
    .brand{ display:flex; gap:12px; align-items:center; }
    .bag-icon{ width:44px; height:44px; border-radius:8px; box-shadow: 0 6px 18px rgba(0,200,255,0.06); padding:6px; background: linear-gradient(180deg, rgba(0,200,255,0.06), rgba(0,200,255,0.02)); }
    .brand-name{ font-weight:700; font-size:18px; letter-spacing:0.2px }
    .brand-tag{ font-size:12px; color:var(--muted) }

    nav.nav-center{ display:flex; gap:12px; align-items:center; }
    .nav-link{ color:var(--muted); padding:8px 12px; border-radius:8px; transition: all .22s ease; font-weight:600; font-size:14px; }
    .nav-link:hover{ color:white; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); transform:translateY(-2px); }
    .nav-link.active{ color:var(--accent); box-shadow: 0 6px 18px rgba(0,200,255,0.06); }

    .nav-right{ display:flex; align-items:center; gap:10px; }
    .search-wrap input{ width:320px; max-width:36vw; padding:10px 12px; border-radius:10px; background:var(--glass); border:1px solid var(--glass-border); color:#e6eef6; outline:none; }
    .icon-btn{ background:transparent; border:1px solid rgba(255,255,255,0.03); padding:8px 10px; border-radius:10px; cursor:pointer; color:var(--muted); transition: all .18s ease; font-weight:600; }
    .icon-btn:hover{ transform:translateY(-3px); color:white; border-color:rgba(255,255,255,0.06); box-shadow:0 12px 40px rgba(0,0,0,0.6); }

    .cart-count{ display:inline-block; min-width:20px; padding:0 7px; border-radius:999px; background: linear-gradient(90deg,var(--accent),#66f0ff); color:#001; font-weight:700; margin-left:8px; font-size:13px; box-shadow:0 6px 20px rgba(0,200,255,0.06), inset 0 -2px 6px rgba(255,255,255,0.06); }

    main{ padding:28px 28px 120px; max-width:1200px; margin:0 auto; }

    /* HERO */
    .hero{ display:grid; grid-template-columns: 1fr 420px; gap:24px; align-items:center; margin-top:18px; }
    .hero-left{ padding:28px; background: linear-gradient(180deg, rgba(255,255,255,0.014), rgba(255,255,255,0.01)); border-radius:18px; box-shadow:var(--shadow); border:1px solid rgba(255,255,255,0.02); transform-origin:center; }
    .hero-title{ font-size:40px; line-height:1.02; margin:0 0 12px; color:#ffffff; letter-spacing:-0.6px; }
    .hero-title span{ color:var(--accent); text-shadow: 0 6px 36px rgba(0,200,255,0.08); }
    .hero-sub{ color:var(--muted); margin:12px 0 18px; max-width:56ch; }
    .hero-ctas{ display:flex; gap:12px; }
    .btn-accent{ background: linear-gradient(90deg,var(--accent), #66f0ff); color:#001; padding:10px 14px; border-radius:10px; border:none; cursor:pointer; font-weight:700; box-shadow: 0 10px 30px rgba(0,200,255,0.08); transform:translateZ(0); }
    .btn-ghost{ background:transparent; border:1px solid rgba(255,255,255,0.04); padding:10px 12px; color:var(--muted); border-radius:10px; cursor:pointer; font-weight:700; }
    .hero-right{ display:flex; flex-direction:column; gap:14px; align-items:flex-end; }
    .hero-card{ width:100%; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; overflow:hidden; border:1px solid rgba(255,255,255,0.02); box-shadow: 0 20px 50px rgba(2,6,23,0.6); transform:translateZ(0); }
    .hero-card img{ display:block; width:100%; height:260px; object-fit:cover; }

    /* SECTIONS */
    section.container{ margin-top:28px; background:transparent; }
    .section-title{ font-size:22px; margin:6px 0 12px; color:#fff; display:flex; align-items:center; gap:8px; }
    .deals-grid{ display:grid; grid-template-columns: repeat(3,1fr); gap:16px; }
    .deal-card{ background:var(--card); border-radius:12px; padding:12px; border:1px solid rgba(255,255,255,0.03); transition: transform .18s cubic-bezier(.2,.9,.2,1), box-shadow .18s; overflow:hidden; }
    .deal-card img{ width:100%; height:150px; object-fit:cover; border-radius:8px; display:block; }
    .deal-card h3{ margin:10px 0 6px; font-size:16px; }
    .deal-card .muted{ color:var(--muted); font-size:13px; margin:0; }
    .deal-actions{ display:flex; align-items:center; justify-content:space-between; margin-top:12px; gap:10px; }
    .deal-actions .price{ font-weight:700; color:#fff; }
    .deal-card:hover{ transform: translateY(-8px) scale(1.01); box-shadow:0 20px 50px rgba(0,0,0,0.6); }

    .cat-grid{ display:grid; grid-template-columns: repeat(6,1fr); gap:12px; margin-top:12px; }
    .cat-card{ background:var(--card); border-radius:10px; padding:8px; text-align:center; cursor:pointer; transition: transform .14s ease; border:1px solid rgba(255,255,255,0.02); }
    .cat-card img{ width:100%; height:100px; border-radius:8px; object-fit:cover; display:block; }
    .cat-card:hover{ transform:translateY(-6px); box-shadow: 0 16px 40px rgba(0,0,0,0.6); }

    /* ABOUT / FOOTER */
    .about-grid{ display:flex; gap:18px; align-items:center; margin-top:12px; }
    .about-image img{ width:420px; border-radius:12px; }

    footer.site-footer{ margin-top:42px; padding:24px; border-top:1px solid rgba(255,255,255,0.03); display:flex; justify-content:space-between; align-items:center; gap:12px; color:var(--muted); }

    /* Toast */
    #toast{ position:fixed; right:22px; bottom:24px; background:linear-gradient(90deg, rgba(0,0,0,0.6), rgba(12,16,20,0.6)); color:#e6f7ff; padding:12px 16px; border-radius:10px; box-shadow:0 18px 50px rgba(0,0,0,0.6); transform:translateY(12px) scale(.98); opacity:0; transition: all .28s cubic-bezier(.2,.9,.2,1); font-weight:600; z-index:9999;}
    #toast.show{ opacity:1; transform:translateY(0) scale(1); }

    /* small responsive */
    @media (max-width:1000px){
      .hero{ grid-template-columns: 1fr; }
      .deals-grid{ grid-template-columns: repeat(2,1fr); }
      .cat-grid{ grid-template-columns: repeat(3,1fr); }
      .search-wrap input{ width:220px; }
    }
    @media (max-width:600px){
      .deals-grid{ grid-template-columns: 1fr; }
      .cat-grid{ grid-template-columns: repeat(2,1fr); }
      header.navbar{ flex-direction:column; align-items:flex-start; gap:8px; padding:12px; }
      .search-wrap input{ width:100%; max-width:100%; }
    }

    /* Enhanced animations and modern effects */
    .pop-in { animation: popIn .55s cubic-bezier(.2,.85,.32,1) both; }
    @keyframes popIn { from { opacity:0; transform: translateY(12px) scale(.98) } to { opacity:1; transform: translateY(0) scale(1) } }

    .glow-pulse { box-shadow:0 0 0 rgba(0,0,0,0); animation: pulse 2.6s infinite; }
    @keyframes pulse { 0%{ box-shadow:0 0 0 rgba(0,200,255,0.08)} 50%{ box-shadow:0 12px 40px rgba(0,200,255,0.08)} 100%{ box-shadow:0 0 0 rgba(0,200,255,0.02)} }

    /* Modern hover effects */
    .deal-card {
      position: relative;
      overflow: hidden;
    }
    
    .deal-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.5s;
    }
    
    .deal-card:hover::before {
      left: 100%;
    }

    /* Enhanced button animations */
    .btn-accent {
      position: relative;
      overflow: hidden;
    }
    
    .btn-accent::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.3s;
    }
    
    .btn-accent:hover::before {
      left: 100%;
    }

    /* Floating elements */
    .floating {
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    /* Gradient text effect */
    .gradient-text {
      background: linear-gradient(45deg, var(--accent), #66f0ff, var(--accent-2));
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 3s ease infinite;
    }
    
    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Enhanced card shadows */
    .deal-card, .cat-card, .hero-card {
      backdrop-filter: blur(10px);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Modern scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.05);
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #66f0ff;
    }

  </style>
</head>
<body>

  <header class="navbar pop-in">
    <div class="brand">
      <div class="bag-icon" style="width:44px; height:44px; border-radius:12px; background:linear-gradient(135deg, #00c8ff, #66f0ff); display:flex; align-items:center; justify-content:center; color:#001; font-weight:800; font-size:18px; box-shadow:0 8px 25px rgba(0,200,255,0.3);">
        DW
      </div>
      <div>
        <div class="brand-name">DealWise</div>
        <div class="brand-tag">Smart Deals ‚Ä¢ Verified</div>
      </div>
    </div>

    <nav class="nav-center">
      <a class="nav-link active" href="index.html">Home</a>
      <a class="nav-link" href="categories.html">Categories</a>
      <a class="nav-link" href="deals.html">Top Deals</a>
      <a class="nav-link" href="purchase-history.html">History</a>
      <a class="nav-link" href="wishlist.html">‚ù§Ô∏è Wishlist</a>
      <a class="nav-link" href="compare.html">‚öñÔ∏è Compare</a>
    </nav>

    <div class="nav-right">
      <div class="search-wrap">
        <input id="searchInput" placeholder="Search deals, gadgets, categories..." />
      </div>

      <button id="cartButton" class="icon-btn">
        üõçÔ∏è <span id="cartCount" class="cart-count">0</span>
      </button>

     <button id="loginBtn" class="icon-btn" onclick="navigateTo('login.html')">Login</button>
     <button id="signupBtn" class="btn-accent" onclick="navigateTo('signup.html')">Sign Up</button>

    <script>
       function navigateTo(page) {
       window.location.href = page;
  }
   </script>

    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="hero-left slide-up stagger-1">
        <h1 class="hero-title">Discover the best deals ‚Äî <span class="gradient-text">save smarter</span></h1>
        <p class="hero-sub">DealWise collects verified offers, honest reviews and price-tracking tools ‚Äî all in one neon-powered, dark-mode interface built for fast shopping.</p>
        <div class="hero-ctas">
           <button class="btn-accent micro-bounce liquid-btn btn-ripple" onclick="navigateTo('deals.html')">Browse Deals</button>
           <button class="btn-ghost micro-bounce magnetic" onclick="navigateTo('categories.html')">Shop by Category</button>
        </div>

        <script> 
           function navigateTo(page) {
    // Simple navigation handler
           window.location.href = page;
  }
        </script>

        <div style="margin-top:18px; display:flex; gap:12px; align-items:center;">
          <div style="display:flex; gap:8px; align-items:center;">
            <div style="width:10px; height:10px; border-radius:12px; background:var(--accent); box-shadow:0 8px 30px rgba(0,200,255,0.06)"></div>
            <div style="color:var(--muted); font-weight:700;">Verified sellers</div>
          </div>
          <div style="display:flex; gap:8px; align-items:center;">
            <div style="width:10px; height:10px; border-radius:12px; background:var(--accent-2); box-shadow:0 8px 30px rgba(255,193,7,0.06)"></div>
            <div style="color:var(--muted); font-weight:700;">Price alerts</div>
          </div>
        </div>
      </div>

      <aside class="hero-right slide-up stagger-2 glow-pulse floating">
        <div class="hero-card">
          <img src="https://images.unsplash.com/photo-1585386959984-a4155223f8a2?auto=format&fit=crop&w=1000&q=80" alt="Headphones" onerror="this.src='assets/placeholder.svg'">
          <div style="padding:12px; display:flex; justify-content:space-between; align-items:center;">
            <div>
              <div style="font-weight:700">Wireless Headphones</div>
              <div style="color:var(--muted); font-size:13px;">Now ‚Çπ2,499 ‚Ä¢ 30% off</div>
            </div>
            <div>
             <button class="btn-accent" onclick="addToCartByData('d1')">Add</button>

<!-- Toast Message -->
<div id="toast" class="toast">‚úÖ Added to Cart!</div>

<style>
  .toast {
    visibility: hidden;
    min-width: 180px;
    background: linear-gradient(90deg, #00e0ff, #00ffa6);
    color: #000;
    text-align: center;
    border-radius: 50px;
    padding: 10px 20px;
    position: fixed;
    bottom: 40px;
    right: 40px;
    font-weight: 600;
    z-index: 9999;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }

  .toast.show {
    visibility: visible;
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  function addToCartByData(itemId) {
    const toast = document.getElementById("toast");
    toast.classList.add("show");
    setTimeout(() => {
      toast.classList.remove("show");
    }, 2000); // disappears after 2s
  }
</script>


            </div>
          </div>
        </div>
        <div style="margin-top:12px; color:var(--muted); font-size:13px; text-align:right;">‚ú® Trusted deals ‚Ä¢ real users</div>
      </aside>
    </section>

    <!-- WHY CHOOSE -->
    <section class="container why">
      <h2 class="section-title holographic slide-up stagger-1">Why Choose DealWise</h2>
      <div style="display:flex; gap:12px;">
        <div class="why-card slide-up stagger-2" style="flex:1; background:var(--card); padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.02);">
          <div style="font-size:22px">üîé</div>
          <div style="font-weight:700; margin-top:8px">Smart Discovery</div>
          <div style="color:var(--muted)">Find curated, high-value offers across platforms.</div>
        </div>
        <div class="why-card slide-up stagger-3" style="flex:1; background:var(--card); padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.02);">
          <div style="font-size:22px">üõ°Ô∏è</div>
          <div style="font-weight:700; margin-top:8px">Verified Trust</div>
          <div style="color:var(--muted)">We verify listings and surface real reviews.</div>
        </div>
        <div class="why-card slide-up stagger-4" style="flex:1; background:var(--card); padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,0.02);">
          <div style="font-size:22px">üîî</div>
          <div style="font-weight:700; margin-top:8px">Price Alerts</div>
          <div style="color:var(--muted)">Track prices and get notified when they drop.</div>
        </div>
      </div>
    </section>

    <!-- CATEGORIES -->
    <section id="categories" class="container">
      <h2 class="section-title holographic slide-up stagger-1">Shop by Category</h2>
      <div class="cat-grid">
        <div class="cat-card slide-up stagger-1" onclick="navigateTo('categories.html')">
          <img src="https://images.unsplash.com/photo-1498049794561-7780e7231661?auto=format&fit=crop&w=1000&q=80" alt="Electronics" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Electronics</div>
        </div>
        <div class="cat-card slide-up stagger-2" onclick="navigateTo('categories.html')">
          <img src="https://images.unsplash.com/photo-1445205170230-053b83016050?auto=format&fit=crop&w=1000&q=80" alt="Fashion" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Fashion</div>
        </div>
        <div class="cat-card slide-up stagger-3" onclick="navigateTo('categories.html')">
          <img src="https://images.unsplash.com/photo-1556911220-bff31c812dba?auto=format&fit=crop&w=1000&q=80" alt="Home" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Home & Kitchen</div>
        </div>
        <div class="cat-card slide-up stagger-4" onclick="navigateTo('categories.html')">
          <img src="https://images.unsplash.com/photo-1517836357463-d25dfeac3438?auto=format&fit=crop&w=1000&q=80" alt="Fitness" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Fitness</div>
        </div>
        <div class="cat-card slide-up stagger-5" onclick="navigateTo('categories.html')">
          <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&w=1000&q=80" alt="Gaming" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Gaming</div>
        </div>
        <div class="cat-card slide-up stagger-6" onclick="navigateTo('categories.html')">
          <img src="https://images.unsplash.com/photo-1596462502278-27bfdc403348?auto=format&fit=crop&w=1000&q=80" alt="Beauty" onerror="this.src='assets/placeholder.svg'">
          <div style="margin-top:8px; font-weight:700">Beauty</div>
        </div>
      </div>
    </section>

  
    <!-- ABOUT -->
    <section id="about" class="container about">
      <h2 class="section-title">About DealWise</h2>
      <div class="about-grid" style="gap:18px; align-items:center;">
        <div style="flex:1">
          <p style="color:var(--muted); max-width:56ch">DealWise curates verified offers and user feedback so you can shop confidently ‚Äî saving time and money. We combine smart discovery, price tracking and community trust.</p>
          <ul style="color:var(--muted)">
            <li>Multi-source deal consolidation</li>
            <li>Honest reviews & ratings</li>
            <li>Price history & alerts</li>
          </ul>
        </div>
        <div class="about-image">
          <img src="/shopping.svg" alt="About" style="width:320px; border-radius:10px;" onerror="this.src='assets/placeholder.svg'">
        </div>
      </div>
    </section>

    <!-- CONTACT PREVIEW -->
    <section id="contact" class="container contact">
      <h2 class="section-title">Get in touch</h2>
      <p style="color:var(--muted)">Questions, feedback or collaboration ideas? Head to Contact page to send a message.</p>
      <div style="margin-top:12px;">
        <button class="btn-ghost" onclick="navigateTo('contact.html')">Open Contact Page</button>
      </div>
    </section>

  </main>

  <footer class="site-footer">
    <div>
      <div style="display:flex; gap:10px; align-items:center">
        <div style="display:flex; gap:10px; align-items:center">
          <div style="width:30px; height:30px; border-radius:8px; background:linear-gradient(135deg, #00c8ff, #66f0ff); display:flex; align-items:center; justify-content:center; color:#001; font-weight:800; font-size:14px;">
            DW
          </div>
          <div style="font-weight:700">DealWise</div>
        </div>
        <div style="color:var(--muted); margin-left:12px">¬© 2025 DealWise</div>
      </div>
    </div>

    <div style="display:flex; gap:20px; align-items:center">
      <nav style="display:flex; gap:15px">
        <a href="deals.html" style="color:var(--muted); text-decoration:none; transition:color 0.3s ease;">Top Deals</a>
        <a href="categories.html" style="color:var(--muted); text-decoration:none; transition:color 0.3s ease;">Categories</a>
        <a href="about.html" style="color:var(--muted); text-decoration:none; transition:color 0.3s ease;">About</a>
        <a href="contact.html" style="color:var(--muted); text-decoration:none; transition:color 0.3s ease;">Contact</a>
      </nav>
      
      <div style="display:flex; gap:15px; align-items:center; margin-left:20px;">
        <span style="color:var(--muted); font-size:14px;">Follow us:</span>
        <a href="https://instagram.com/dealwise" target="_blank" style="color:var(--accent); text-decoration:none; font-size:18px; transition:all 0.3s ease;" title="Instagram">üì∑</a>
        <a href="https://twitter.com/dealwise" target="_blank" style="color:var(--accent); text-decoration:none; font-size:18px; transition:all 0.3s ease;" title="Twitter">üê¶</a>
        <a href="https://facebook.com/dealwise" target="_blank" style="color:var(--accent); text-decoration:none; font-size:18px; transition:all 0.3s ease;" title="Facebook">üìò</a>
        <a href="https://linkedin.com/company/dealwise" target="_blank" style="color:var(--accent); text-decoration:none; font-size:18px; transition:all 0.3s ease;" title="LinkedIn">üíº</a>
        <a href="https://youtube.com/dealwise" target="_blank" style="color:var(--accent); text-decoration:none; font-size:18px; transition:all 0.3s ease;" title="YouTube">üì∫</a>
      </div>
    </div>
  </footer>

  <div id="toast" role="status" aria-live="polite"></div>

  <script src="js/global.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/shared.js"></script>
  <script src="js/features.js"></script>
  <script src="js/chatbot.js"></script>
  <script src="js/main.js"></script>
  <script>
    /**********************************************
     * DealWise index.js (inline) - Dark + lively
     **********************************************/

    // ---------- CONFIG ----------
    // If your backend runs elsewhere, change API_BASE
    const API_BASE = 'http://localhost:8080/api';

    // ---------- SAMPLE DATA built from catalog with realistic prices ----------
    function getCatalog(){ try { return JSON.parse(localStorage.getItem('dealwise_catalog')||'{}'); } catch(e){ return {}; } }
    function priceForTitle(name){
      const t=(name||'').toLowerCase(); const n=(a,b)=>Math.round(Math.random()*(b-a)+a);
      if(t.includes('iphone')||t.includes('galaxy')||t.includes('phone')) return `‚Çπ${n(45000,120000).toLocaleString('en-IN')}`;
      if(t.includes('macbook')||t.includes('xps')||t.includes('laptop')) return `‚Çπ${n(60000,180000).toLocaleString('en-IN')}`;
      if(t.includes('tv')) return `‚Çπ${n(25000,90000).toLocaleString('en-IN')}`;
      if(t.includes('ipad')||t.includes('tablet')) return `‚Çπ${n(30000,90000).toLocaleString('en-IN')}`;
      if(t.includes('buds')||t.includes('headphone')) return `‚Çπ${n(2000,35000).toLocaleString('en-IN')}`;
      if(t.includes('camera')) return `‚Çπ${n(40000,120000).toLocaleString('en-IN')}`;
      if(t.includes('watch')) return `‚Çπ${n(3000,30000).toLocaleString('en-IN')}`;
      if(t.includes('keyboard')||t.includes('mouse')||t.includes('speaker')) return `‚Çπ${n(1499,14999).toLocaleString('en-IN')}`;
      if(t.includes('jeans')||t.includes('shirt')||t.includes('polo')||t.includes('tee')) return `‚Çπ${n(799,3999).toLocaleString('en-IN')}`;
      if(t.includes('sneaker')||t.includes('shoes')) return `‚Çπ${n(1999,9999).toLocaleString('en-IN')}`;
      if(t.includes('air fryer')||t.includes('kettle')||t.includes('cook')) return `‚Çπ${n(999,6999).toLocaleString('en-IN')}`;
      if(t.includes('treadmill')||t.includes('exercise')) return `‚Çπ${n(12000,65000).toLocaleString('en-IN')}`;
      if(t.includes('serum')||t.includes('foundation')||t.includes('toner')||t.includes('lotion')) return `‚Çπ${n(199,2499).toLocaleString('en-IN')}`;
      return `‚Çπ${n(999,9999).toLocaleString('en-IN')}`;
    }
    function getCategoryImage(category) {
      const images = {
        electronics: 'https://images.unsplash.com/photo-1498049794561-7780e7231661?auto=format&fit=crop&w=800&q=80',
        fashion: 'https://images.unsplash.com/photo-1445205170230-053b83016050?auto=format&fit=crop&w=800&q=80',
        home: 'https://images.unsplash.com/photo-1556911220-bff31c812dba?auto=format&fit=crop&w=800&q=80',
        fitness: 'https://images.unsplash.com/photo-1517836357463-d25dfeac3438?auto=format&fit=crop&w=800&q=80',
        gaming: 'https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&w=800&q=80',
        beauty: 'https://images.unsplash.com/photo-1596462502278-27bfdc403348?auto=format&fit=crop&w=800&q=80'
      };
      return images[category] || 'https://images.unsplash.com/photo-1498049794561-7780e7231661?auto=format&fit=crop&w=800&q=80';
    }

    function mixedDeals(){
      const catalog=getCatalog(); const order=['electronics','fashion','home','fitness','gaming','beauty'];
      const set=new Set(); const out=[];
      order.forEach(k=>{ (catalog[k]||[]).slice(0,6).forEach((name,i)=>{ if(set.has(name)) return; set.add(name); out.push({ id:`${k}-${i+1}`, title:name, price:priceForTitle(name), note:'Great deal', img:getCategoryImage(k) }); }); });
      if(out.length) return out;
      return [
        { id:'d1', title:'Wireless Headphones', price:'‚Çπ2,499', note:'30% off', img:'https://images.unsplash.com/photo-1585386959984-a4155223f8a2?auto=format&fit=crop&w=800&q=80' },
        { id:'d2', title:'Smartwatch Series 6', price:'‚Çπ8,999', note:'25% off', img:'https://images.unsplash.com/photo-1516574187841-cb9cc2ca948b?auto=format&fit=crop&w=800&q=80' },
        { id:'d3', title:'RGB Gaming Keyboard', price:'‚Çπ1,799', note:'40% off', img:'https://images.unsplash.com/photo-1606813902829-65e5484d7331?auto=format&fit=crop&w=800&q=80' }
      ];
    }
    const SAMPLE_DEALS = mixedDeals();

    // ---------- CART (localStorage) ----------
    const CART_KEY = 'dealwise_cart';
    function readCart(){ try { return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); } catch(e){ return []; } }
    function writeCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)); updateCartUI(); }
    function updateCartUI(){
      const count = readCart().reduce((s,i)=> s + (i.qty||1), 0);
      const el = document.getElementById('cartCount');
      if(el) el.textContent = count;
      // tiny glow when updated
      const btn = document.getElementById('cartButton');
      if(btn){ btn.classList.add('glow-pulse'); setTimeout(()=> btn.classList.remove('glow-pulse'), 900); }
    }

    function showToast(msg, time=2000){
      const t = document.getElementById('toast');
      if(!t) return;
      t.innerHTML = `<div style="display: flex; align-items: center; gap: 8px;"><span style="font-size: 18px;">‚úÖ</span>${msg}</div>`;
      t.classList.add('show');
      clearTimeout(window._toastTO);
      window._toastTO = setTimeout(()=> t.classList.remove('show'), time);
    }

    // Called by hero card add button
    function addToCartByData(id){
      const deal = SAMPLE_DEALS.find(d=>d.id===id);
      if(!deal) {
        DealWiseUtils.showToast('Item not available', 'error');
        return;
      }
      
      // Use global cart system
      window.dealwiseCart.addToCart({
        id: deal.id,
        title: deal.title,
        price: deal.price,
        img: deal.img,
        note: deal.note
      });
      
      DealWiseUtils.showToast('‚úÖ Added to cart!', 'success');
    }

    // will be used for dynamic "Add" buttons
    function addToCartFromButton(btn){
      const id = btn.getAttribute('data-id');
      const deal = SAMPLE_DEALS.find(d=>d.id===id);
      if(!deal) {
        DealWiseUtils.showToast('Item not available', 'error');
        return;
      }
      
      // Use global cart system
      window.dealwiseCart.addToCart({
        id: deal.id,
        title: deal.title,
        price: deal.price,
        img: deal.img,
        note: deal.note
      });

      // Enhanced animated +1 near the button
      const plus = document.createElement('span');
      plus.innerHTML = '<span style="color: #00ffea; font-weight: 800; font-size: 16px;">+1</span>';
      plus.style.position='absolute';
      plus.style.top='-10px';
      plus.style.right='-10px';
      plus.style.transform='translateY(0) scale(1)';
      plus.style.opacity='1';
      plus.style.pointerEvents='none';
      plus.style.zIndex='1000';
      btn.style.position='relative';
      btn.appendChild(plus);
      
      // Enhanced animation with scale and rotation
      plus.animate([
        { transform:'translateY(0px) scale(1) rotate(0deg)', opacity:1 },
        { transform:'translateY(-30px) scale(1.2) rotate(5deg)', opacity:0.8 },
        { transform:'translateY(-40px) scale(0.8) rotate(-5deg)', opacity:0 }
      ], { 
        duration: 1000, 
        easing: 'cubic-bezier(.2,.9,.2,1)' 
      });
      setTimeout(()=> plus.remove(), 1100);

      DealWiseUtils.showToast('‚úÖ Added to cart!', 'success');
    }

    // ---------- Render deals to grid ----------
    function renderDealsList(deals){
      const grid = document.getElementById('dealsGrid');
      if(!grid) return;
      grid.innerHTML = '';
      deals.forEach((d, index) => {
        const card = document.createElement('div');
        card.className = `deal-card slide-up stagger-${Math.min(index + 1, 6)}`;
        card.innerHTML = `
          <img src="${d.img || 'https://images.unsplash.com/photo-1585386959984-a4155223f8a2?auto=format&fit=crop&w=1000&q=80'}" alt="${d.title}">
          <h3>${d.title}</h3>
          <p class="muted">${d.note}</p>
          <div class="deal-actions">
            <div class="price">${d.price}</div>
            <div style="display:flex;gap:8px;">
              <button class="btn-ghost" data-id="${d.id}" onclick="navigateTo('product-detail.html?id=${d.id}')">View</button>
              <button class="btn-accent" data-id="${d.id}">Add</button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
      // Always re-bind Add handlers:
      grid.querySelectorAll('.btn-accent[data-id]').forEach(b=>{
        b.onclick = function(){ addToCartFromButton(b); };
      });
    }

    // ---------- Navigation helpers (page transitions) ----------
    function navigateTo(href){
      // small fade out animation then navigate
      document.documentElement.style.transition = 'opacity .28s ease, transform .28s ease';
      document.documentElement.style.opacity = '0.0';
      setTimeout(()=> location.href = href, 260);
    }

    // ---------- Try fetching deals from backend, else fallback ----------
    async function loadDeals(){
      const grid = document.getElementById('dealsGrid');
      if(!grid) return;
      
      // Modern loading animation
      grid.innerHTML = `
        <div style="grid-column: 1 / -1; display: flex; justify-content: center; align-items: center; padding: 40px;">
          <div style="display: flex; flex-direction: column; align-items: center; gap: 16px;">
            <div style="width: 40px; height: 40px; border: 3px solid rgba(0,200,255,0.2); border-top: 3px solid var(--accent); border-radius: 50%; animation: spin 1s linear infinite;"></div>
            <div style="color: var(--muted); font-weight: 600;">Loading amazing deals...</div>
          </div>
        </div>
      `;
      
      // Add spin animation
      const style = document.createElement('style');
      style.textContent = '@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }';
      document.head.appendChild(style);
      
      try {
        const res = await fetch(API_BASE + '/deals');
        if(res.ok){
          const data = await res.json();
          if(Array.isArray(data) && data.length){
            // Transform backend data to frontend format
            const transformedDeals = data.map(deal => ({
              id: `d${deal.id}`,
              title: deal.title,
              price: deal.price,
              note: deal.discount || 'Great deal',
              img: deal.imageUrl || 'https://images.unsplash.com/photo-1498049794561-7780e7231661?auto=format&fit=crop&w=800&q=80'
            }));
            renderDealsList(transformedDeals);
            return;
          }
        }
      } catch(e){
        console.log('Backend not available, using sample data:', e);
      }
      // fallback:
      setTimeout(() => {
        renderDealsList(SAMPLE_DEALS);
      }, 800); // Small delay for better UX
    }

    // ---------- Modals / login signup ‚Üí redirect to full pages ----------
    document.addEventListener('DOMContentLoaded', ()=>{
      setTimeout(()=> { document.documentElement.style.opacity='1'; }, 80);
      updateCartUI();
      loadDeals();

      // Attach event listeners after DOM is ready
      document.getElementById('loginBtn')?.addEventListener('click', ()=> navigateTo('login.html'));
      document.getElementById('signupBtn')?.addEventListener('click', ()=> navigateTo('signup.html'));
      document.getElementById('cartButton')?.addEventListener('click', ()=> navigateTo('cart.html'));

      // small health check console
      fetch(API_BASE + '/hello').then(r=>r.text()).then(t=> console.log('backend:', t)).catch(()=>{ /* backend may be down ‚Äî it's fine */});
    });

    // expose addToCartByData globally (used in inline onclick)
    window.addToCartByData = addToCartByData;
    window.addToCartFromButton = addToCartFromButton;
    window.navigateTo = navigateTo;

      // --- Update cart count dynamically ---
document.addEventListener('DOMContentLoaded', () => {
  updateCartCount(); // already in your code, but ensures refresh works

  // redirect to cart page when clicking cart icon
  const cartBtn = document.querySelector('.cart-icon') || document.getElementById('cartButton');
  if(cartBtn){
    cartBtn.addEventListener('click', () => {
      window.location.href = 'cart.html';
    });
  }
});

// Robust fallback: delegate Add buttons site-wide in case nodes are recreated
document.addEventListener('click', (e) => {
  const btn = e.target.closest('.btn-accent[data-id]');
  if (!btn) return;
  try {
    addToCartFromButton(btn);
  } catch {}
});

  </script>

</body>
</html>
